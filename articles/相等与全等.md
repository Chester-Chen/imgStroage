date: 2020.03.02

# 相等 ==

- 如果有一个操作数是布尔值，则在比较相等性之前先将其转换为数值——`false`转换为0，而`true`转换为`1`；
- 如果一个操作数是字符串，另一个操作数是数值，在比较相等性之前先将字符串转换为数值
- 如果一个操作数是对象，另一个操作数不是，则调用对象的`valueOf()`方法，用得到的基本类型值按照前面的规则进行比较

当两个操作数进行比较时，遵循一下原则：
- `null`和`undefined`是相等的
- 若两个操作符是对象，则比较是否是同一个对象。若两个操作数指向同一个对象，则返回`true`，否则`false`
- 要比较相等性之前，不能将`null` 和 `undefined` 转换成其他任何值
- 如果有一个操作数是`NaN`，则相等操作符返回 `false` ，而不相等操作符返回 `true`。重要提示：即使两个操作数都是`NaN`，
  相等操作符也返回 `false`了；因为按照规则， `NaN` 不等于 `NaN`


# 全等 ===

除了在比较前不转换操作数外，全等与相等操作符没有其他区别

下面举个栗子就明了了

```js

console.log('1' == 1) // true
console.log('1' === 1) // false     不同数据类型

```

第一句，相等操作符的情况下，字符`'1'`根据前面的规则，会被转换类型为数值，所以返回`true`。

第二句，全等操作符的情况下，根据上面的比较规则，在不转换的情况下，字符是不等于数值类型的，所以为`false`

所以在全等比较的情况下，只要出现类型不同的情况，都为`false`；类型相同的情况下，再比较值的相等性。


# [] == ![] 与 {} == !{}

## [] == ![]

！可将变量转换成`boolean`类型，`null`、`undefined`、`NaN`以及空字符串`''`取反都为`true`，其余都为`false`。

所以`![]` 转换后是 `false`

所以 `[] == ![]` 相当于 `[] == false` 根据前面提到的相等规则，若有布尔类型，则转为数值

所以  `[] == ![]` 相当于 `[] == false` 相当于 `[] == 0`

再根据上面的规则 ， 如果一个操作数是对象，另一个操作数不是，则调用对象的`valueOf()`方法。如果对象没有`valueOf()`方法, 
则调用`toString()`方法

对[]空数组使用`tostring()`方法，会返回空字符串`""`

所以 `[] == 0` 相当于`"" == 0`

根据上面的规则，字符串与数值比较，将字符串转换为数值，`Number('')`,返回的是`0`

此时此刻`[] == ![]` 已经转换成 `0 == 0` 的比较了。这几显而易见了，原式返回的值为`true`

## {} == !{}

类上。此处简写。

{} == false

{} == 0

"[object Object]" == 0

<!-- Number("[object Object]"),返回NaN -->

NaN == 0    // false

